---
import Carrusel from "../projects/Carrusel.astro";
import projects from "../../collections/projects.json";

interface Props {
  id: number;
}
const { id } = Astro.props;
const data = projects.find((item) => item.id === id);

const BASE = import.meta.env.BASE_URL;
---

<div class="card card-compact bg-base-100 shadow-xl">
  <figure onclick=`modal_${data.id}.showModal()`>
    <img src=`${BASE}${data.img}` alt={data.name} title={data.name} class="w-100 h-40" />
  </figure>
  <div class="card-body">
    <a href={data.url} target="_blank">
      <h2 class="card-title">{data.name}</h2>
    </a>
    <p class="hidden md:block">{data.description}</p>
    <div class="card-actions justify-end">
      <button
        class="btn btn-primary btn-sm"
        onclick=`modal_${data.id}.showModal()`
      >
        Ver Más
      </button>
    </div>
  </div>
</div>

<dialog id=`modal_${data.id}` class="modal">
  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
        ✕
      </button>
    </form>
    <h3 class="text-lg font-bold">{data.name}</h3>
    <p class="py-4">
      {data.description}
    </p>
    <p>
      <p class="text-sm mb-1">Mi participación:</p>
      <progress class="progress progress-primary" value={data.level} max="100"
      ></progress>
      <div class="grid place-items-center">
        <span>{data.level}%</span>
      </div>
    </p>
    <p class="mt-3">
      <Carrusel id={id} />
    </p>
    <div>
      <p>
        Tags:
        {
          data.tags.map((d) => {
            return (
              <span class="badge badge-warning badge-outline text-xs mr-1">
                {d}
              </span>
            );
          })
        }
      </p>
    </div>
    <div class="grid justify-items-end mt-5">
      <p>
        <a href={data.url} class="link link-primary">Visitar sitio</a>
      </p>
    </div>
  </div>
</dialog>
